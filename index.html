<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionale Cambio Mole Rettifica</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --background-color: #ecf0f1;
            --text-color: #333;
            --border-color: #bdc3c7;
            --success-color: #27ae60;
            --error-color: #e74c3c;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        h1, h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .flex-container {
            display: flex;
            justify-content: space-between;
            gap: 30px;
        }

        .form-section, .data-section {
            flex: 1;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--primary-color);
        }

        select, button {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
        }

        select:focus, button:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #2980b9;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #e2e2e2;
        }

        .notification {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            display: none;
        }

        .notification.success {
            background-color: var(--success-color);
            color: white;
        }

        .notification.error {
            background-color: var(--error-color);
            color: white;
        }

        @media (max-width: 768px) {
            .flex-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gestionale Cambio Mole Rettifica</h1>
        <div id="notificationBox" class="notification"></div>
        <div class="flex-container">
            <section class="form-section">
                <h2>Inserisci Operazione</h2>
                <form id="operationForm">
                    <div class="form-group">
                        <label for="turno">Turno:</label>
                        <select id="turno" name="turno" required>
                            <option value="">Seleziona turno</option>
                            <option value="mattino">Mattino</option>
                            <option value="pomeriggio">Pomeriggio</option>
                            <option value="notte">Notte</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="macchina">Macchina Rettifica:</label>
                        <select id="macchina" name="macchina" required>
                            <option value="">Tutte le macchine</option>
                            <option value="Rettifica 0">Rettifica 0</option>
                            <option value="Rettifica 1">Rettifica 1</option>
                            <option value="Rettifica 2">Rettifica 2</option>
                            <option value="Rettifica 3">Rettifica 3</option>
                            <option value="Rettifica 4">Rettifica 4</option>
                            <option value="Rettifica 5">Rettifica 5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tipoOperazione">Tipo Operazione:</label>
                        <select id="tipoOperazione" name="tipoOperazione" required>
                            <option value="">Seleziona operazione</option>
                            <option value="cambioMola">Cambio Mola</option>
                            <option value="cambioBisello">Cambio Bisello</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modulo">Modulo:</label>
                        <select id="modulo" name="modulo" required>
                            <option value="">Seleziona modulo</option>
                            <option value="primoModulo">Primo Modulo</option>
                            <option value="secondoModulo">Secondo Modulo</option>
                        </select>
                    </div>
                    <div id="dettagliMola" style="display:none;">
                        <div class="form-group">
                            <label for="posizioneMola">Posizione Mola:</label>
                            <select id="posizioneMola" name="posizioneMola">
                                <option value="">Seleziona posizione</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tipoMola">Tipo Mola:</label>
                            <select id="tipoMola" name="tipoMola">
                                <option value="">Seleziona tipo</option>
                                <option value="tecnodiamant">Tecnodiamant</option>
                                <option value="surface">Surface</option>
                            </select>
                        </div>
                    </div>
                    <div id="dettagliBisello" style="display:none;">
                        <div class="form-group">
                            <label for="latoBisello">Lato Bisello:</label>
                            <select id="latoBisello" name="latoBisello">
                                <option value="">Seleziona lato</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit">Registra Operazione</button>
                </form>
            </section>
            <section class="data-section">
                <h2>Ultime 10 Mole</h2>
                <div id="ultimeMoleContent"></div>
            </section>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('operationForm');
            const macchina = document.getElementById('macchina');
            const modulo = document.getElementById('modulo');
            const tipoOperazione = document.getElementById('tipoOperazione');
            const posizioneMola = document.getElementById('posizioneMola');
            const latoBisello = document.getElementById('latoBisello');
            const dettagliMola = document.getElementById('dettagliMola');
            const dettagliBisello = document.getElementById('dettagliBisello');
            const notificationBox = document.getElementById('notificationBox');
            const ultimeMoleContent = document.getElementById('ultimeMoleContent');

            const tutteLeUltimeMole = [
                { data: '2024-07-24', macchina: 'Rettifica 1', posizione: 5, tipo: 'Tecnodiamant' },
                { data: '2024-07-23', macchina: 'Rettifica 2', posizione: 12, tipo: 'Surface' },
                { data: '2024-07-22', macchina: 'Rettifica 0', posizione: 8, tipo: 'Tecnodiamant' },
                { data: '2024-07-21', macchina: 'Rettifica 3', posizione: 18, tipo: 'Surface' },
                { data: '2024-07-20', macchina: 'Rettifica 1', posizione: 3, tipo: 'Tecnodiamant' },
                { data: '2024-07-19', macchina: 'Rettifica 4', posizione: 22, tipo: 'Surface' },
                { data: '2024-07-18', macchina: 'Rettifica 2', posizione: 15, tipo: 'Tecnodiamant' },
                { data: '2024-07-17', macchina: 'Rettifica 5', posizione: 7, tipo: 'Surface' },
                { data: '2024-07-16', macchina: 'Rettifica 0', posizione: 10, tipo: 'Tecnodiamant' },
                { data: '2024-07-15', macchina: 'Rettifica 3', posizione: 20, tipo: 'Surface' }
            ];

            function updateSelect(selectElement, options) {
                selectElement.innerHTML = '<option value="">Seleziona</option>' +
                    options.map(option => `<option value="${option}">${option}</option>`).join('');
            }

            function showNotification(message, type) {
                notificationBox.textContent = message;
                notificationBox.className = `notification ${type}`;
                notificationBox.style.display = 'block';
                setTimeout(() => notificationBox.style.display = 'none', 3000);
            }

            function updatePosizioneMola() {
                const maxPosition = modulo.value === 'primoModulo' ? 24 : 22;
                updateSelect(posizioneMola, Array.from({length: maxPosition}, (_, i) => i + 1));
            }

            function updateLatoBisello() {
                updateSelect(latoBisello, ['Lato Operatore (Destra)', 'Lato Non Operatore (Sinistra)']);
            }

            function toggleDetailsVisibility() {
                dettagliMola.style.display = tipoOperazione.value === 'cambioMola' ? 'block' : 'none';
                dettagliBisello.style.display = tipoOperazione.value === 'cambioBisello' ? 'block' : 'none';
            }

            function populateUltimeMole(macchinaSelezionata = '') {
                const filteredMole = macchinaSelezionata
                    ? tutteLeUltimeMole.filter(mola => mola.macchina === macchinaSelezionata)
                    : tutteLeUltimeMole;

                const ultimeMole = filteredMole.slice(0, 10);

                if (ultimeMole.length === 0) {
                    ultimeMoleContent.innerHTML = '<p>Nessun dato disponibile al momento.</p>';
                    return;
                }

                const tableRows = ultimeMole.map(mola => `
                    <tr>
                        <td>${mola.data}</td>
                        <td>${mola.macchina}</td>
                        <td>${mola.posizione}</td>
                        <td>${mola.tipo}</td>
                    </tr>
                `).join('');

                ultimeMoleContent.innerHTML = `
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Macchina</th>
                                <th>Posizione</th>
                                <th>Tipo</th>
                            </tr>
                        </thead>
                        <tbody>${tableRows}</tbody>
                    </table>
                `;
            }

            modulo.addEventListener('change', updatePosizioneMola);
            
            tipoOperazione.addEventListener('change', () => {
                toggleDetailsVisibility();
                if (tipoOperazione.value === 'cambioMola') updatePosizioneMola();
                if (tipoOperazione.value === 'cambioBisello') updateLatoBisello();
            });

            macchina.addEventListener('change', () => populateUltimeMole(macchina.value));

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                showNotification('Operazione registrata con successo!', 'success');
            });

            populateUltimeMole();
        });
    </script>
</body>
</html>